{% extends "base.html" %}

{% block content %}

<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Registro</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/registro.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Khula:wght@600&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400&display=swap" rel="stylesheet">
</head>
<body>
    <div class="registro">
        <div class="barra-inicio">
            <img class="replay-svgrepo-com" src="{{ url_for('static', filename='images/generales/logo.svg') }}" />
            <div class="renovate">
                renovate
            </div>
        </div>
        <form method="post" action="" enctype="multipart/form-data" class="frame-20">
            {{ form.hidden_tag() }}
            <div class="frame-18">
                <div class="frame-8">
                    <div class="rectangle-9">
                        <img id="foto-preview" src="" >
                    </div>
                    <input type="file" id="foto_usuario" name="foto_usuario" class="file-input" accept="image/*">
                    <label for="foto_usuario" class="notis texto">Agregar Foto</label>
                </div>
                <div class="frame-17">
                    <input type="text" id="nombre" name="nombre" placeholder="Nombre..." class="dorpdown-3 categoria-3">
                    <input type="text" id="apellido_usuario" name="apellido_usuario" placeholder="Apellido..." class="dorpdown categoria">
                    <input type="text" id="nombre_usuario" name="nombre_usuario" placeholder="Nombre Usuario..." class="dorpdown-3 categoria-1">
                    <input type="password" id="contrasena_usuario" name="contrasena_usuario" placeholder="Contraseña..." class="dorpdown-3 categoria-1">
                    <input type="password" id="repetir_contrasena" name="repetir_contrasena" placeholder="Repetir Contraseña..." class="dorpdown-3 categoria-1">
                    <input type="email" id="email_usuario" name="email_usuario" placeholder="Email..." class="dorpdown-3 categoria-1">
                    <input type="date" id="fecha_nacimiento_usuario" name="fecha_nacimiento_usuario" placeholder="Fecha Nacimiento..." class="dorpdown-3 categoria-1">
                </div>
            </div>
            <div class="frame-19">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <input type="submit" value="Registrarse" class="dorpdown-7 categoria-7">
                <p class="ya-tienes-una-cuenta-inicia-sesion">
                    <span class="ya-tienes-una-cuenta-inicia-sesion-sub-8">¿Ya tienes una cuenta? </span><span></span> <a class="link" href="{{ url_for('renovate.login') }}">Iniciar Sesion</a>
                </p>
            </div>
        </form>
    </div>

    <script>
    console.log('JavaScript is loaded');
    document.getElementById('foto_usuario').addEventListener('change', function(event) {
        console.log('File input changed');
        const file = event.target.files[0];
        if (file) {
            console.log('File selected:', file.name);
            const reader = new FileReader();
            reader.onload = function(e) {
                console.log('FileReader loaded');
                const img = document.getElementById('foto-preview');
                img.src = e.target.result;
                img.style.display = 'block';
                console.log('Image source set to:', img.src);
            };
            reader.readAsDataURL(file);
        } else {
            console.log('No file selected');
        }
    });

    </script>
</body>
</html>
{% endblock %}
